<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>How to implement stream aggregate in QMiner</h1><h2>Registering stream aggregate in JS</h2><p>The aggregate should be registered in <code>TStreamAggr::Init()</code> in <code>qminer_core.cpp</code>.</p>
<p>It is then exposed to Node.js via registration of a stream aggregate in the <code>qm_nodejs_streamaggr.cpp</code>. A new aggregate is being instanciated via line <code>StreamAggr = TQm::TStreamAggr::New(JsBase-&gt;Base, TypeNm, ParamVal);</code>, where JSON with aggregate definition is being loaded from Node.JS.</p>
<h2>Implementation</h2><p>Some useful hints (coding style):</p>
<ul>
<li>do not use tabs in C++ code; use spaces (4 spaces / tab)</li>
<li>save/load state should only save state variables and not parameters</li>
<li>use {} after ifs, use () in ifs consistently</li>
<li>use TFlt only for members of classes, otherwise use double</li>
</ul>
<h3>Headers</h3><p>Create headers for aggregate in <code>qminer_aggr.h</code>. Some of the functions like <code>IsNmInt</code> or <code>IsNmFlt</code> or <code>GetType</code> or <code>Type</code> can already be implemented in the header.</p>
<h3>Code</h3><p>Implement the following functions</p>
<ul>
<li><code>constructor</code></li>
<li><code>LoadState</code></li>
<li><code>SaveState</code></li>
<li><code>Reset</code></li>
<li><code>GetNmInt</code> and/or <code>GetNmFlt</code> and/or <code>...</code> (based on the stream aggregate interface)</li>
</ul>
<p>Check that each aggregate implements all the interfaces for the inhereted type. i.e.: Page-Hinkley test inherits <code>TStreamAggrOut::INmInt</code> and <code>TStreamAggrOut:IInt</code> (this means that the functions <code>int GetInt()</code>, <code>int GetNmInt(const TStr&amp; Nm)</code> and <code>bool IsNmInt(const TStr&amp; Nm)</code> need to be implemented.</p>
<p>Additionally <code>GetParams()</code> and <code>SetParams(const PJsonVal&amp; ParamVal)</code> can be implemented for changing aggregate static properties.</p>
<h3>Testing</h3><p>Add unit tests in <code>test\nodejs</code>, the files are <code>streamaggr.js</code> and <code>streamaggr2.js</code>.</p>
<h3>Documentation</h3><p>Add documentation at the top of <code>qm_nodejs_streamaggr.h</code>. Describe all the methods and constructor parameters. Add a nice example, which can be based on the unit tests code.</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="DDM.html">DDM</a></li><li><a href="Node.html">Node</a></li><li><a href="PageHinkley.html">PageHinkley</a></li><li><a href="RandomTreeGenerator.html">RandomTreeGenerator</a></li><li><a href="Stream.html">Stream</a></li><li><a href="StreamModel.html">StreamModel</a></li><li><a href="Utils.html">Utils</a></li><li><a href="WaveformGenerator.html">WaveformGenerator</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Nov 19 2018 14:14:27 GMT+0100 (Central Europe Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>