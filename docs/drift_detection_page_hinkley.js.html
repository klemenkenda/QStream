<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: drift_detection/page_hinkley.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: drift_detection/page_hinkley.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Copyright (c) JoÅ¾ef Stefan Institute &amp; contributors to the QStream project, 2018.
 * All rights reserved.
 *
 * This source code is licensed under the FreeBSD license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * Drift detector - Page-Hinkley test.
 * Author: Klemen Kenda, klemen.kenda@ijs.si
 */

// includes
let BaseDriftDetector = require('./base_drift_detector.js');

/**
 * Page-Hinkley drift detector.
 * @extends BaseDriftDetector
 */
class PageHinkley extends BaseDriftDetector {
    /**
     * Page Hinkley change detector (based on scikit-multiflow implementation, which is further based on
     * the book - Gamma, Knowledge Discovery from Data Streams, 2013, pp. 76)
     *
     * This change detection method works by computing the observed values and their mean up to the current
     * moment. Page Hinkley won't output warning zone warnings, only change detections. The method works by
     * means of the Page Hinkley test. In general lines it will detect a concept drift if the observed mean
     * at some instant is greater then a threshold value lambda.
     *
     * @param {int}     min_num_instances   The minimum number of instances before detecting change.
     * @param {float}   delta               The delta factor for the Page Hinkley test.
     * @param {int}     lambda              The change detection threshold.
     * @param {float}   alpha               The forgetting factor, used to weight the observed value and the mean.
     */
    constructor(min_num_instances = 30, delta = 0.005, lambda = 50, alpha = 1-0.0001) {
        super();

        this.min_instances = min_num_instances;
        this.delta = delta;
        this.lambda = lambda;
        this.alpha = alpha;

        this.x_mean = null;
        this.sample_count = null;
        this.sum = null;
        this.in_concept_change = null;
        this.reset();
    }

    /**
     * Resets the change detector parameters (in the beginning or after drift detection).
     */
    reset() {
        super.reset();
        this.sample_count = 1;
        this.x_mean = 0.0;
        this.sum = 0.0;
        this.in_concept_change = false;
    }

    /**
     * Add new element to the statistics.
     *
     * After calling this method, to verify if the change was detected, one should call the super method
     * detected_change, which returns True if concept drift has been detected and False otherwise.
     *
     * @param {numeric} x   The observed value, from which we want to detect the concept change.
     */
    add_element(x) {
        if (this.in_concept_change) this.reset();

        this.x_mean = this.x_mean + (x - this.x_mean) / (1.0 * this.sample_count);
        this.sum = this.alpha * this.sum + (x - this.x_mean - this.delta);

        this.sample_count++;

        this.estimation = this.x_mean;
        this.in_concept_change = false;
        this.in_warning_zone = false;

        this.delay = 0;

        if (this.sample_count &lt; this.min_instances) return;

        if (this.sum > this.lambda) this.in_concept_change = true;
    }

}

module.exports = PageHinkley;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BaseDriftDetector.html">BaseDriftDetector</a></li><li><a href="DataGenerator.html">DataGenerator</a></li><li><a href="DDM.html">DDM</a></li><li><a href="Node.html">Node</a></li><li><a href="PageHinkley.html">PageHinkley</a></li><li><a href="RandomTreeGenerator.html">RandomTreeGenerator</a></li><li><a href="Stream.html">Stream</a></li><li><a href="StreamModel.html">StreamModel</a></li><li><a href="WaveformGenerator.html">WaveformGenerator</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Dec 11 2018 09:33:34 GMT+0100 (Central Europe Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
